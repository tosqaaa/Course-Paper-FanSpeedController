### **1. Инициализация переменных и функций принадлежности**

#### Что происходит?
В классе `FanSpeedController` создаются три основные переменные: 
- **`temperature`** (температура)
- **`humidity`** (влажность)
- **`fan_speed`** (скорость вентилятора)

Для каждой переменной определяются **функции принадлежности** с помощью метода `fuzz.trimf`, который создает треугольные функции принадлежности. Эти функции представляют степени принадлежности значений к категориям:
- Для температуры и влажности: `low`, `medium`, `high`
- Для скорости вентилятора: `low`, `medium`, `high`

#### Пример:
- Если температура = 40, то она:
  - Принадлежит к категории `low` с принадлежностью ~0.33.
  - Принадлежит к категории `medium` с принадлежностью ~0.67.
  - Не принадлежит категории `high`.

---

### **2. Определение правил**

#### Что происходит?
Правила описывают, как входные переменные влияют на выходную. Например:
- Если температура **`high`** и влажность **`high`**, то скорость вентилятора должна быть **`high`**.
- Если температура **`medium`** и влажность **`medium`**, то скорость вентилятора должна быть **`medium`**.
- Если температура **`low`** или влажность **`low`**, то скорость вентилятора должна быть **`low`**.

Эти правила создаются с использованием объекта `ctrl.Rule`.

---

### **3. Система управления и симуляция**

#### Что происходит?
- Создается объект `ControlSystem`, который объединяет все правила.
- Затем объект `ControlSystemSimulation` используется для выполнения расчетов на основе входных данных.

---

### **4. Вычисления (Fuzzy Inference)**

#### Шаги вычисления:
1. **Определение степеней принадлежности входных данных:**
   Для введенных значений температуры и влажности система определяет, как сильно они принадлежат к каждой категории (`low`, `medium`, `high`).

   Пример:  
   - Температура = 75:  
     - `medium` ~ 0.25  
     - `high` ~ 0.75  
   - Влажность = 65:  
     - `medium` ~ 0.5  
     - `high` ~ 0.5  

2. **Применение правил:**
   Каждое правило активируется в зависимости от степеней принадлежности входных данных. Например:
   - Для правила `temperature['high'] & humidity['high']`, активность будет равна минимальному значению принадлежности:  
     `min(0.75, 0.5) = 0.5`

3. **Агрегация выходов:**
   Выходные значения (`fan_speed`) объединяются из всех правил. Каждое правило добавляет свою степень принадлежности в итоговый график выходной переменной.

4. **Дефаззификация:**
   Итоговое значение (`fan_speed`) вычисляется из объединенного графика. Обычно используется метод центроида (центра тяжести), чтобы получить четкое числовое значение.

---

### **5. Как это работает в коде:**

#### Основной процесс:
- Пользователь вводит температуру и влажность.
- Эти значения обрабатываются симуляцией:
  ```python
  self.simulation.input['temperature'] = temperature_value
  self.simulation.input['humidity'] = humidity_value
  self.simulation.compute()
  ```
- После выполнения:
  - Значения температуры и влажности оцениваются через функции принадлежности.
  - На основе правил рассчитывается итоговое значение скорости вентилятора.

#### Пример расчета:
Если вы ввели:
- **Температура = 75**
- **Влажность = 65**

То результат будет:
- Активируется правило `high-high` с весом ~0.5.
- Итоговая скорость вентилятора будет рассчитана как среднее центроидное значение агрегированных выходов:  
  **~75% скорости.**

---

### **6. Почему это полезно?**
- **Гибкость:** Fuzzy logic позволяет учитывать нечёткие или неточные данные (например, температура не только высокая или низкая, но и средняя).
- **Понятные правила:** Логика задается в виде правил, понятных для человека.
- **Плавный результат:** Выходное значение меняется плавно, а не скачками.
